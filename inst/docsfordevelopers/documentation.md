#Documentation for working on the DSAIDE package and developing new Apps 

##To work on package in RStudio: 
* Load DSAIDE.Rproj in RStudio. Edit files as needed.

##Package structure 
* The main R functions, i.e. the menu and the simulation scripts are in the R/ folder
* The R/ folder also has a few helper/convenience functions
* The shiny apps are in the inst/shinyapps/ subfolder. Each App has a corresponding www/ subfolder which contains the documentation. This folder is automatically generated as described below.
* the inst/shinyapps/allappdocumentation foulder contains html files for content in shiny apps. This will need to be processed, see below.
* \inst\docsfordevelopers contains information for someone wanting to add new apps to the package
* \inst\simulatorfunctions contains the R code for all simulator functions for easy access and editing by users
* folder \vignettes contains the vignette - this is copied to \inst\doc at some point, don't edit it there
* folder \mynotes contains things useful for development that don't make it into the final package
* folder \man contains the documentation, automatically generated by roxygen

##Dependency packages for development
* roxygen
* devtools
* rmarkdown for vignette and shiny documentation
* packages needed by DSAIDE: see DESCRIPTION file

##Adding Apps
* Write the main simulator function, following the structure of the existing functions.
* Write the Shiny wrapper/App. Easiest by copying and modifying one of the existing apps.
* Add the simulator function and Shiny app to appropriate directories.

##Integrating Apps
* Add your App to the main menu by modifying dsaidemenu.R and the MainMenu Shiny app.R file.

##To prepare App documentation
* Write the documentation for the app as markdown file. A template exists in the allappdocumentation/rmarkdowntemplate/ folder. Add information to the template as described there. 
* Turn your documentation file into an HTML file and copy to the allappdocumentation/ folder. 
* First part of file name must be the same as name for the Shiny app. You can have additional text following an underscore, it will be stripped.  
* Run the R script processAllFiles.R, which will execute a function by the same name inside the script. This splits html files. Each section in the html file that has a 'shinytabNNN' id will be extracted and placed into a separate html file. Any other sections are ignored.
* The newly created files will be placed in the www subfolders for each shiny app in inst/shinyapps/
* The www subfolder for each shiny app is deleted and re-created on each run, so should not contain any other files
* Naming for newly created html files is shinytab1.html, etc. and header.html/footer.html
* see also comments in processAllFiles.R for more details

##To update R documentation and vignette
* Edit documentation inside R functions. 
* Build documentation with More/Document or devtools::document()
* Edit vignette inside the \vignettes folder.
* To build new vignette, run devtools::build_vignettes()

##Contributing your Apps
* The best way to add your apps to the DSAIDE package is if you fork the package from github, write your app, then send a pull request.
* Alternatively, if you are not familiar with that approach, you can email me your new App files and I can manually integrate them.

##To build the DSAIDE package:
* "by hand" edit the DESCRIPTION file to make sure it's up to date
* Use the functions in the 'build' tab to test and build the package.
* Run clean and rebuild, then build and reload using menu, or devtools::load_all()
* Run the check 

##To use package for users:
* install either from CRAN or github
* for github install, install devtools package, load it
* then run install_github("ahgroup/DSAIDE")
* library('DSAIDE') 
* dsaidemenu()

##Notes:
* One can also use the 'git' tab to sync with github.
* All needed libraries should be loaded via the DESCRIPTION file and not in separate R files